{% extends 'base.html' %}

{% block content%}

<div class="container">
    <div class="col-md-10 offset-md-1 mt-5">
        <div class="jumbotron">
            <h1 class="display-4 m-3 text-center">Teacher Panel</h1>
            <hr class="my-4">
            <div class="row">
                <div class="col-md-4 col-xl-4">
                    <div class="card bg-c-gtx order-card">
                        <div class="card-block">
                            <h6 class="m-b-20 text-center">Registered Students </h6>
                            <h2 class="text-center"><i class="fas fa-user-graduate f-left"></i><span>
                                    {{student_count}}</span>
                            </h2>
                        </div>
                    </div>
                </div>

                <div class="col-md-4 col-xl-4">
                    <div class="card bg-c-yellow order-card">
                        <div class="card-block">
                            <h6 class="m-b-20 text-center">Total Subjects</h6>
                            <h2 class="text-center"><i class="fas fa-book f-left"></i><span> {{subject_count}}</span>
                            </h2>

                        </div>
                    </div>
                </div>

                <div class="col-md-4 col-xl-4">
                    <div class="card bg-c-blue order-card">
                        <div class="card-block">
                            <h6 class="m-b-20 text-center">Total Questions</h6>
                            <h2 class="text-center"><i class="fas fa-question-circle f-left"></i><span>
                                    {{question_count}}</span>
                            </h2>

                        </div>
                    </div>
                </div>
            </div>
            <h1 class="display-6 m-3 text-center">Add A Question</h1>
            <hr class="my-4">
            <form method="post" autocomplete="off" style="margin:100px;margin-top: 0px;">
                {% csrf_token %}
                {{ question_form.as_p }}
                {{ option_form.as_p }}
                <button class="btn btn-success btn-xs" type="submit">Submit</button>
            </form>
            <div class="container">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <h6 class="panel-title">Available Subjects</h6>
                    </div>
                    <table class="table table-hover table-bordered" id="dev-table">
                        <thead>
                            <tr>

                                <th>Subject</th>
                                <th>Total Question</th>
                                <th>Approved</th>
                                <th>Action</th>
                            </tr>
                        </thead>

                        <tbody>
                            {% if exams %}
                            {% for exam in exams %}
                            <tr>
                                <td>{{ exam }}</td>
                                <td>{{ exam.questions_count }}</td>
                                <td>{{ exam.is_approved }}</td>
                                <td>
                                    <a class="btn btn-primary btn-xs" value="{{exam}}"
                                        href="{%url 'question' exam.subject.name%}">
                                        <span
                                            class="glyphicon glyphicon-trash">View Questions
                                        </span>
                                    </a>
                                    <form method="POST">
                                        {% csrf_token %}
                                        <input type="hidden" name="exam_id" value="{{exam.id}}">
                                        <button name="request-btn" class="btn btn-success btn-xs" type="submit">
                                            <span
                                                class="glyphicon glyphicon-trash">Request
                                            </span>
                                        </button>
                                    </form>
                                </td>
                            </tr>
                            {% endfor %}
                            {% else %}
                            <p>No Subject found.</p>
                            {% endif %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock content%}